GUINEA IPC HEALTH TRAINING DATA MANAGEMENT
last updated 2015-07-06 by David Megginson


All instructions in this document refer to the shared "Guinea IPC
data" dropbox folder.

Prerequisite: you must have the HXL scripts from
https://github.com/HXLStandard/libhxl-python installed and running on
your system.


Workflow
--------

1. Guinea IPC cluster members upload new copies of their reporting
   spreadsheets into their dedicated subfolders under Uploads.

2. (Temporary) whenever there are new spreadsheets, we make a copy
   under Tagged/ and add a row of HXL hashtags, as specified in
   https://goo.gl/ULkJO7

3. From the root of the shared folder, run the Linux command

     bash do-prepare.sh

   to prepare filtered working copies of all spreadsheets in the
   Tagged/ folder. Watch the output for any obvious problems (there
   will be some failures, since not all workbooks have two sheets).

4. From the root of the shared folder, run the Linux command

     sh do-merge.sh

   to create a merged dataset in the file ipc-merged.csv

5. Examine the file ipc-merged.csv for basic sanity (is it at least
   several hundred rows long? does it have HXL tags at the top?).

6. If all is well, run the Linux command

     sh do-publish.sh

   to create copies of the merged dataset in the Public/ folder. The
   new data will be available immediately on HDX.


Files and folders
-----------------

corrections-table.csv
  CSV file listing dynamic string substitutions for spelling mistakes,
  etc. Extend this to add new corrections. Used by do-prepare.sh.

do-prepare.sh
  Bash shell script for preparing the data to be merged.

do-merge.sh
  Bash/Bourne shell script for merging the data into a single HXL CSV
  file.

do-publish.sh
  Bash/Bourne shell script that copies the merged data into the Public
  folder, and creates a version without HXL tags. When run, the data
  is immediately visible on HDX.

ipc-merged.csv
  Most-recent output of the merged data, before being published to the
  Public/ folder. After running do-merge.sh, look at this first to
  make sure it's OK before running do-publish.sh.

merge-master.csv
  Master header file for the HXL merge. *Please* don't touch this
  unless you know what you're doing.

Public/
  Output files that are publicly visible via HDX, generated by the
  do-publish.sh script.  Do not rename these files, or else the HDX
  links will stop working.

Tagged/
  Folder for copies of the reports with HXL tags added manually (won't
  be needed in the future).

Uploads/
  Root folder for uploading new reports from participating NGOs. There
  is a folder inside for each of the reporting organisations, and only
  those subfolders should be shared with them (so that they can't
  accidentally overwrite each-others' data).

Working/
  Folder for temporary working copies of HXL files. Everything in this
  folder can be automatically deleted by the scripts, so don't put
  anything important here.
